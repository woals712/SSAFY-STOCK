reference: 파이썬 증권 데이터 분석 (2020, 김황후)

# 투자 전략 정리

### 효율적 투자선

몬테카를로 시뮬레이션을 통한 포트폴리오 생성

1. 상장사의 시가, 종가, 최고가, 최저가 정보를 가져온다
2. 일간 수익률, 연간 수익률, 일간 리스크, 연간 리스크를 구한다
   - 일간 수익률: 전일 대비 수익이 난 정도를 백분율로 표시
   - 연간 수익률: 일간 수익률 * 252 (미국의 1년 평균 주식 개장일)
   - 일간 리스크: 일간 수익률의 공분산 (Covariance)
   - 연간 리스크: 일간 리스크 * 252
3. 각 종목 별로 비중을 다르게 부여해 포트폴리오를 생성한다. 
4. 이 때 비중을 매번 무작위로 부여하는 것을 몬테카를로 시뮬레이션이라 한다. 
5. 각 포트폴리오의 수익률, 리스크를 계산한다. 
   - 수익률: 종목별 비중 * 종목별 연간 수익률
   - 리스크: sqrt((종목별 비중)T * ((종목별 연간 리스크) * (종목별 비중)))



샤프 지수

- 샤프 지수 = (포트폴리오 예상 수익률 - 무위험률) / 수익률의 표준편차
- 샤프 지수를 통해 리스크 대비 수익률이 가장 큰 포트폴리오를 찾을 수 있음



볼린저 밴드

1. 관련 지표
   - 표준 볼린저 밴드 공식
     - 중간 볼린저 밴드: 종가의 20일 이동평균
     - 상단 볼린저 밴드: 중간 볼린저 밴드 + (2 * 표준편차)
     - 하단 볼린저 밴드: 중간 볼린저 밴드 - (2 * 표준편차)

   - %b = (종가 - 하단 볼린저 밴드) / (상단 볼린저 밴드 - 중간 볼린저 밴드)
     - %b는 주가가 볼린저 밴드의 어디쯤에 위치한 지를 나타내 준다

   - 밴드폭 = (상단 볼린저 밴드 - 하단 볼린저 밴드) / 중간 볼린저 밴드
     - 밴드폭이 작아지는 것으로 스퀴즈를 예측할 수 있다. 스퀴즈란 변동성이 극히 낮은 수준까지 떨어져 곧이어 변동성 증가가 발생할 것으로 예상되는 상황을 말한다. 
     - 또한 스퀴즈로부터 추세의 시작과 끝을 알아낼 수 있다. 

2. 볼린저 밴드 매매기법

   - 추세 추종 매매기법

     - %b가 0.8보다 크고, MFI가 80보다 클 때 매수
     - %b가 0.2보다 작고, MFI가 20보다 작을 때 매도
     - 관련 지표
       - 중심 가격 = (고가 + 저가 + 종가) / 3
       - MF (Money Flow) = 중심 가격 * 거래량
       - 중심 가격이 전일보다 상승한 경우 긍정적 현금 흐름, 하락한 경우 부정적 현금 흐름
       - MFI = 100 - (100 / (1 + 긍정적 현금 흐름 / 부정적 현금 흐름))

   - 반전 매매기법

     - %b가 0.05보다 작고, II%가 0보다 크면 매수

     - %b가 0.95보다 크고, II%가 0보다 작으면 매도

     - 관련 지표

       - 일중 강도 (Intraday Intensity, II) = 거래량 * (2 * 종가 - 고가 - 저가) / (고가 - 저가)

       - 일중 강도율 (II%) = 100 * 일중 강도의 21일 합 / 거래량의 21일 합

         

심리투자 법칙 - 삼중창 매매법

1. 첫 번째 창 - 시장 조류

   - 매매 단위보다 한 단계 긴 단위의 차트를 이용한 분석

     12주 단위로 매매한다면 26주 단위

   - 12주, 26주 지수 이동평균을 구한 후 빼서 MACD선을 구한다. 

   - MACD의 9주 지수 이동평균을 구해서 신호선으로 저장한다

   - MACD선에서 신호선을 빼서 MACD 히스토그램을 구한다. 

   - 초기에는 MACD 히스토그램의 기울기를 이용했으나, 현재는 긴 단위 차트의 지수 이동평균이 증가할 때 시장에 참여하는 방식으로 바뀜

2. 두 번째 창 - 시장 파도

   1. 오실레이터 (가격 범위 내에서 현재 가격의 상대적 위치) 이용
   2. 14일 간의 최대값, 최소값을 구해서 빠른 선 %K, 느린 선 %D를 구한다. 
   3. 지수 이동평균이 상승할 때 스토캐스틱이 30 이하면 매수, 지수 이동평균이 하락할 때 스토캐스틱이 70 이상이면 매도

3. 세 번째 창 - 진입 기술

   첫 번째, 두 번째 창이 보내는 신호를 결합해 진입 시점을 찾아내는 기법

| 주간 추세 | 일간 오실레이터 | 행동 |      주문      |
| :-------: | :-------------: | :--: | :------------: |
|   상승    |      상승       | 관망 |                |
|   상승    |      하락       | 매수 | 추적 매수 스톱 |
|   하락    |      하락       | 관망 |                |
|   하락    |      상승       | 매도 | 추적 매도 스톱 |



듀얼 모멘텀 투자

1. 모멘텀 현상: 최근 나타난 경향이 계속해서 비슷하게 나타나는 현상

   - 전년도 수익률이 가장 높았던 종목들이 올해에도 비슷한 경향을 보인다는 이론

   - 6~12개월 동안의 강세주들은 이후 동일한 기간 동안에도 강세주

     1개월 이내의 단기 매매나 2년 이상의 장기 매매에서는 제 위치를 찾아가는 역추세 현상이 나타남

2. 듀얼 모멘텀 투자: 위의 모멘텀 현상에 기초하여 투자 종목을 선택하는 기법

   - 상대적 모멘텀과 절대적 모멘텀을 결합하여 최고가에서 매수하는 경우 방지
     - 상대적 모멘텀: 특정 기간 동안 상대적으로 수익률이 좋았던 n개 종목을 구한 것
     - 절대적 모멘텀: 자산의 가치가 상승할 때만 투자, 그렇지 않다면 단기 국채를 매수하거나 현금을 보유하는 전략

